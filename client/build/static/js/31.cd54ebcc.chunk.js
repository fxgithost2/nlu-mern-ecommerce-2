(this["webpackJsonpmern.ecommerce.client"]=this["webpackJsonpmern.ecommerce.client"]||[]).push([[31],{2799:function(e,t,n){"use strict";function i(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function a(e,t){return"desc"===e?function(e,n){return i(e,n,t)}:function(e,n){return-i(e,n,t)}}function c(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var i=t(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),n.map((function(e){return e[0]}))}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}))},2802:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(2752),a=n(2955),c=n(618),r=n(2956),o=n(2890),s=n(305),l=n(47),d=n(0);function u(e){var t=e.open,n=e.setOpen,u=e.handleSubmit,j=e.textContent,b=Object(l.a)().t,h=function(){n(!1)};return Object(d.jsxs)(i.a,{open:t,onClose:h,children:[Object(d.jsx)(a.a,{children:Object(d.jsx)(c.a,{variant:"h4",marginBottom:2,sx:{textTransform:"uppercase"},children:b("common.confirm-action-delete")})}),Object(d.jsx)(r.a,{children:Object(d.jsx)(c.a,{variant:"h6",children:j})}),Object(d.jsxs)(o.a,{children:[Object(d.jsx)(s.a,{onClick:h,color:"inherit",children:b("common.cancel")}),Object(d.jsx)(s.a,{onClick:u,variant:"contained",children:b("common.save")})]})]})}},2953:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return te})),n.d(t,"c",(function(){return ce})),n.d(t,"d",(function(){return re}));var i=n(16),a=n(26),c=n(2782),r=n.n(c),o=n(2796),s=n.n(o),l=n(2794),d=n.n(l),u=n(2894),j=n.n(u),b=n(2895),h=n.n(b),O=n(1),p=n(32),m=n(3606),f=n(2751),x=n(611),v=n(2762),g=n(2765),y=n(2766),k=n(101),S=n(36),C=n(2802),P=n(0);function w(e){var t=e.productId,n=e.productName,c=e.isHide,o=e.onChangeHide,l=e.onDelete,u=Object(k.d)().t,b=Object(O.useRef)(null),w=Object(O.useState)(!1),I=Object(i.a)(w,2),W=I[0],T=I[1],q=Object(O.useState)(!1),B=Object(i.a)(q,2),z=B[0],E=B[1],L=Object(O.useState)(""),N=Object(i.a)(L,2),R=N[0],_=N[1];Object(O.useEffect)((function(){var e=u("products.confirm-delete",{nameInfo:n});_(e)}),[n]);return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(f.a,{ref:b,onClick:function(){return T(!0)},children:Object(P.jsx)(a.Icon,{icon:d.a,width:20,height:20})}),Object(P.jsxs)(x.a,{open:W,anchorEl:b.current,onClose:function(){return T(!1)},PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(P.jsxs)(v.a,{component:p.b,to:"".concat(S.b.app.products.root,"/").concat(Object(m.a)(t),"/edit"),sx:{color:"text.secondary"},children:[Object(P.jsx)(g.a,{children:Object(P.jsx)(a.Icon,{icon:r.a,width:24,height:24})}),Object(P.jsx)(y.a,{primary:u("common.edit"),primaryTypographyProps:{variant:"body2"}})]}),Object(P.jsxs)(v.a,{onClick:function(e){"function"===typeof o&&o(t),T(!1)},sx:{color:"text.secondary"},children:[Object(P.jsx)(g.a,{children:Object(P.jsx)(a.Icon,{icon:c?j.a:h.a,width:24,height:24})}),Object(P.jsx)(y.a,{primary:c?"Hi\u1ec3n th\u1ecb":"\u1ea8n s\u1ea3n ph\u1ea7m",primaryTypographyProps:{variant:"body2"}})]}),Object(P.jsxs)(v.a,{onClick:function(){E(!0),T(!1)},sx:{color:"text.secondary"},children:[Object(P.jsx)(g.a,{children:Object(P.jsx)(a.Icon,{icon:s.a,width:24,height:24})}),Object(P.jsx)(y.a,{primary:u("common.delete"),primaryTypographyProps:{variant:"body2"}})]})]}),Object(P.jsx)(C.a,{open:z,setOpen:E,handleSubmit:function(){l(),E(!1)},textContent:R})]})}var I=n(3),W=n(28),T=n(393),q=n.n(T),B=n(200),z=n.n(B),E=n(2791),L=n.n(E),N=n(413),R=n.n(N),_=n(2757),V=n(2741),D=n(618),F=n(199),H=n(2742),A=n(2770),U=n(2777),M=n(2755),J=n(2743),K=n(2727),X=n(2775),G=n(6),Q=n(48),Y=n(92),Z=n(47),$=Object(G.a)(_.a)((function(e){return{height:64,display:"flex",justifyContent:"space-between",padding:e.theme.spacing(0,1,0,1)}})),ee=Object(G.a)(V.a)((function(e){var t=e.theme;return{minWidth:240,width:"50%",transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{minWidth:320,width:"100%",boxShadow:t.customShadows.z8},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}));function te(e){var t=e.searchPlaceHolder,n=e.numSelected,c=e.initialValue,o=e.onSearch,s=e.onCategoryChange,l=e.onBrandChange,d=e.onChangeShowHidden,u="light"===Object(Q.a)().palette.mode,j=Object(Y.c)((function(e){return e.product.dashboard})),b=j.categoryFilter,h=j.brandFilter,p=Object(O.useState)([]),m=Object(i.a)(p,2),x=m[0],v=m[1],g=Object(O.useState)([]),y=Object(i.a)(g,2),k=y[0],S=y[1],C=Object(O.useState)(c),w=Object(i.a)(C,2),T=w[0],B=w[1],E=Object(O.useState)(!1),N=Object(i.a)(E,2),_=N[0],V=N[1],G=Object(O.useState)(null),te=Object(i.a)(G,2),ne=te[0],ie=te[1],ae=Object(O.useState)(null),ce=Object(i.a)(ae,2),re=ce[0],oe=ce[1],se=Object(Z.a)().t;Object(O.useEffect)((function(){v([{_id:"",name:"T\u1ea5t c\u1ea3",slug:"",image:""}].concat(Object(W.a)(b))),S([{_id:"",name:"T\u1ea5t c\u1ea3",slug:"",image:""}].concat(Object(W.a)(h))),ne||ie({_id:"",name:"T\u1ea5t c\u1ea3",slug:"",image:""}),re||oe({_id:"",name:"T\u1ea5t c\u1ea3",slug:"",image:""})}),[b,h]),Object(O.useEffect)((function(){"function"===typeof d&&d(_)}),[d,_]),Object(O.useEffect)((function(){"function"===typeof s&&ne&&"_id"in ne&&s(ne._id)}),[s,ne]),Object(O.useEffect)((function(){"function"===typeof l&&re&&"_id"in re&&l(re._id)}),[l,re]);return Object(P.jsxs)($,{sx:Object(I.a)({},n>0&&{color:u?"primary.main":"text.primary",bgcolor:u?"primary.lighter":"primary.dark"}),children:[n>0?Object(P.jsxs)(D.a,{color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(P.jsx)(F.a,{sx:{width:"100%"},children:Object(P.jsxs)(H.a,{container:!0,spacing:2,children:[Object(P.jsx)(H.a,{item:!0,xs:6,sm:3,children:Object(P.jsx)(ee,{value:T,onChange:function(e){B(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&"function"===typeof o&&o(e,T)},placeholder:t,size:"small",startAdornment:Object(P.jsx)(A.a,{position:"start",children:Object(P.jsx)(F.a,{component:a.Icon,icon:z.a,sx:{color:"text.disabled"}})})})}),Object(P.jsx)(H.a,{item:!0,xs:6,sm:3,children:Object(P.jsx)(F.a,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:Object(P.jsx)(U.a,{control:Object(P.jsx)(M.a,{checked:_,onChange:function(e){V(e.target.checked)}}),label:se("products.label-toolbar")})})}),Object(P.jsx)(H.a,{item:!0,xs:6,sm:3,children:Object(P.jsx)(J.a,{fullWidth:!0,disableClearable:!0,options:x,getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.name)||"<tr\u1ed1ng>"},value:ne,size:"small",renderInput:function(e){return Object(P.jsx)(K.a,Object(I.a)(Object(I.a)({},e),{},{label:"Danh m\u1ee5c"}))},onChange:function(e,t){t&&ie(t)}})}),Object(P.jsx)(H.a,{item:!0,xs:6,sm:3,children:Object(P.jsx)(J.a,{fullWidth:!0,disableClearable:!0,options:k,getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.name)||"<tr\u1ed1ng>"},value:re,size:"small",renderInput:function(e){return Object(P.jsx)(K.a,Object(I.a)(Object(I.a)({},e),{},{label:"Th\u01b0\u01a1ng hi\u1ec7u"}))},onChange:function(e,t){t&&oe(t)}})})]})}),n>0?Object(P.jsxs)(F.a,{sx:{display:"flex",justifyContent:"right"},children:[1===n&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(X.a,{title:"Edit",children:Object(P.jsx)(f.a,{children:Object(P.jsx)(a.Icon,{icon:r.a})})}),Object(P.jsx)(X.a,{title:"Hide / show",children:Object(P.jsx)(f.a,{children:Object(P.jsx)(a.Icon,{icon:q.a})})})]}),Object(P.jsx)(X.a,{title:"Delete",children:Object(P.jsx)(f.a,{children:Object(P.jsx)(a.Icon,{icon:L.a})})})]}):Object(P.jsx)(X.a,{title:"B\u1ecf l\u1ecdc",children:Object(P.jsx)(f.a,{onClick:function(e){ie(x[0]),oe(k[0]),B(""),"function"===typeof o&&o(e,T)},children:Object(P.jsx)(a.Icon,{icon:R.a})})})]})}var ne=n(2887),ie=n(2888),ae=n(2756);function ce(e){var t=e.headLabel;return Object(P.jsx)(ne.a,{children:Object(P.jsx)(ie.a,{children:t.map((function(e){return Object(P.jsx)(ae.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",children:e.label},e.id)}))})})}function re(e){var t=e.onEdit,n=e.onDelete,c=Object(Z.a)().t,o=Object(O.useRef)(null),l=Object(O.useState)(!1),u=Object(i.a)(l,2),j=u[0],b=u[1];return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(f.a,{ref:o,onClick:function(){return b(!0)},children:Object(P.jsx)(a.Icon,{icon:d.a,width:20,height:20})}),Object(P.jsx)(x.a,{open:j,anchorEl:o.current,onClose:function(){return b(!1)},PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(P.jsxs)("div",{onMouseLeave:function(){return b(!1)},children:[Object(P.jsxs)(v.a,{onClick:t,sx:{color:"text.secondary"},children:[Object(P.jsx)(g.a,{children:Object(P.jsx)(a.Icon,{icon:r.a,width:24,height:24})}),Object(P.jsx)(y.a,{primary:c("common.edit"),primaryTypographyProps:{variant:"body2"}})]}),Object(P.jsxs)(v.a,{onClick:n,sx:{color:"text.secondary"},children:[Object(P.jsx)(g.a,{children:Object(P.jsx)(a.Icon,{icon:s.a,width:24,height:24})}),Object(P.jsx)(y.a,{primary:c("common.delete"),primaryTypographyProps:{variant:"body2"}})]})]})})]})}},3644:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Oe}));var i=n(2772),a=n(36),c=n(389),r=n(2787),o=n(10),s=n.n(o),l=n(17),d=n(16),u=n(3),j=n(232),b=n(125),h=n(35),O=n(32),p=n(1),m=n(231),f=n(6),x=n(48),v=n(618),g=n(2655),y=n(2742),k=n(2776),S=n(2727),C=n(2769),P=n(2743),w=n(2749),I=n(2739),W=n(305),T=n(92),q=n(3097),B=n(47),z=n(240),E=n(239),L=n(391),N=n(0),R=["Toy Story 3","Logan","Full Metal Jacket","Dangal","The Sting","2001: A Space Odyssey","Singin' in the Rain","Toy Story","Bicycle Thieves","The Kid","Inglourious Basterds","Snatch","3 Idiots"],_=Object(f.a)(v.a)((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({},t.typography.subtitle2),{},{color:t.palette.text.secondary,marginBottom:t.spacing(1)})}));function V(){var e,t,n=Object(B.a)().t,i=Object(h.h)(),c=Object(x.a)(),r=Object(b.b)().enqueueSnackbar,o=Object(T.b)(),f=Object(h.i)().id,V=Object(T.c)((function(e){return e.product})).item,D=Object(T.c)((function(e){return e.brand})).list,F=Object(T.c)((function(e){return e.category})).list,H=Object(p.useState)(!1),A=Object(d.a)(H,2),U=A[0],M=A[1],J=Object(p.useState)(!1),K=Object(d.a)(J,2),X=K[0],G=K[1];Object(p.useEffect)((function(){o(Object(z.d)())}),[o]),Object(p.useEffect)((function(){o(Object(E.d)())}),[o]),Object(p.useEffect)((function(){o(Object(L.h)(f))}),[f]);var Q=function(){if(te.brand||M(!0),te.category||G(!0),te.brand&&te.category){var e=Y();V&&(o(Object(L.l)(V._id,e)),r("Update product ".concat(V.name," successfully!"),{variant:"success"}),i(a.b.app.products.list))}},Y=function(){return{name:te.name,desc:te.description,warrantyPeriod:te.warrantyPeriod,origin:null===te||void 0===te?void 0:te.origin.label,brandId:te.brand,categoryId:te.category,tags:te.tags,video:te.video}},Z=j.f().shape({name:j.h().required(n("products.name-validation")),description:j.h().required(n("products.desc-validation"))}),$=Object(m.d)({enableReinitialize:!0,initialValues:{name:(null===V||void 0===V?void 0:V.name)||"",description:(null===V||void 0===V?void 0:V.desc)||"",warrantyPeriod:(null===V||void 0===V?void 0:V.warrantyPeriod)||12,origin:(null===V||void 0===V?void 0:V.origin)||"",brand:(null===V||void 0===V?void 0:V.brand)||"",category:(null===V||void 0===V?void 0:V.category)||"",tags:(null===V||void 0===V?void 0:V.tags)||[R[0]],video:(null===V||void 0===V?void 0:V.video)||""},validationSchema:Z,onSubmit:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),ee=$.errors,te=$.values,ne=$.touched,ie=$.handleSubmit,ae=$.setFieldValue,ce=$.getFieldProps;return Object(N.jsx)(m.b,{value:$,children:Object(N.jsxs)(m.a,{noValidate:!0,autoComplete:"off",children:[Object(N.jsx)(g.a,{direction:"row",spacing:3,sx:{justifyContent:"space-between",marginBottom:c.spacing(2)},children:Object(N.jsx)(v.a,{variant:"h4",gutterBottom:!0,children:n("products.general-info")})}),Object(N.jsxs)(y.a,{container:!0,spacing:3,children:[Object(N.jsx)(y.a,{item:!0,xs:12,md:8,children:Object(N.jsx)(g.a,{spacing:3,children:Object(N.jsx)(k.a,{sx:{p:3},children:Object(N.jsxs)(g.a,{spacing:3,children:[Object(N.jsx)(S.a,Object(u.a)(Object(u.a)({fullWidth:!0,label:n("products.name")},ce("name")),{},{error:Boolean(ne.name&&ee.name),helperText:ne.name&&ee.name})),Object(N.jsxs)("div",{children:[Object(N.jsx)(_,{children:n("products.desc")}),Object(N.jsx)(q.a,{simple:!0,id:"product-description",value:te.description,onChange:function(e){return ae("description",e)},error:Boolean(ne.description&&ee.description)}),ne.description&&ee.description&&Object(N.jsx)(C.a,{error:!0,sx:{px:2},children:ne.description&&ee.description})]}),Object(N.jsx)(S.a,Object(u.a)({fullWidth:!0,label:n("products.video")},ce("video")))]})})})}),Object(N.jsx)(y.a,{item:!0,xs:12,md:4,children:Object(N.jsxs)(g.a,{spacing:3,children:[Object(N.jsx)(k.a,{sx:{p:3},children:Object(N.jsxs)(g.a,{spacing:3,children:[Object(N.jsx)(S.a,Object(u.a)(Object(u.a)({type:"number",fullWidth:!0,label:n("products.warranty-period")},ce("warrantyPeriod")),{},{defaultValue:12})),void 0!==(null===V||void 0===V||null===(e=V.brand)||void 0===e?void 0:e.name)&&Object(N.jsx)(P.a,{required:!0,fullWidth:!0,defaultValue:V.brand,options:D.filter((function(e){return!e.isHide&&e._id!==(null===V||void 0===V?void 0:V.brand)})),getOptionLabel:function(e){return e.name},value:D.find((function(e){return e.slug===(null===V||void 0===V?void 0:V.brand)})),onChange:function(e,t){ae("brand",null===t||void 0===t?void 0:t._id),M(!1)},renderInput:function(e){return Object(N.jsx)(S.a,Object(u.a)(Object(u.a)({},e),{},{label:n("products.brand"),margin:"none",error:Boolean(U)}))},error:Boolean(!0)}),Object(N.jsx)(w.a,{to:a.b.app.brands,color:"inherit",component:O.b,children:Object(N.jsx)(v.a,{variant:"inherit",sx:{marginTop:c.spacing(-2),marginLeft:c.spacing(1),fontSize:"small"},children:Object(N.jsxs)(v.a,{component:"a",variant:"subtitle4",sx:{color:"primary.main"},children:["\xa0",n("products.brand-add")]})})}),void 0!==(null===V||void 0===V||null===(t=V.category)||void 0===t?void 0:t.name)&&Object(N.jsx)(P.a,{fullWidth:!0,defaultValue:V.category,options:F.filter((function(e){return!e.isHide&&e._id!==(null===V||void 0===V?void 0:V.category)})),getOptionLabel:function(e){return e.name},value:F.find((function(e){return e.slug===(null===V||void 0===V?void 0:V.category)})),onChange:function(e,t){ae("category",null===t||void 0===t?void 0:t._id),G(!1)},renderInput:function(e){return Object(N.jsx)(S.a,Object(u.a)(Object(u.a)({},e),{},{label:n("products.category"),margin:"none",error:Boolean(X)}))}}),Object(N.jsx)(w.a,{to:a.b.app.categories,color:"inherit",component:O.b,children:Object(N.jsx)(v.a,{variant:"inherit",sx:{marginTop:c.spacing(-2),marginLeft:c.spacing(1),fontSize:"small"},children:Object(N.jsxs)(v.a,{component:"a",variant:"subtitle4",sx:{color:"primary.main"},children:["\xa0",n("products.category-add")]})})}),Object(N.jsx)(P.a,{multiple:!0,freeSolo:!0,value:te.tags,onChange:function(e,t){ae("tags",t)},options:R.map((function(e){return e})),renderTags:function(e,t){return e.map((function(e,n){return Object(N.jsx)(I.a,Object(u.a)({size:"small",label:e},t({index:n})),e)}))},renderInput:function(e){return Object(N.jsx)(S.a,Object(u.a)({label:"Tags"},e))}})]})}),Object(N.jsx)(W.a,{fullWidth:!0,variant:"contained",size:"large",onClick:ie,children:n("products.save")})]})})]})]})})}var D=n(2885),F=n(2886),H=n(2889),A=n(2888),U=n(2756),M=n(199),J=n(26),K=n(2783),X=n.n(K),G=n(2799),Q=n(126),Y=n(28),Z=n(2752),$=n(2955),ee=n(2956),te=n(2770),ne=n(2890),ie=n(142),ae=n.n(ie),ce=n(2801),re=n(29),oe=n(2809),se=n(2810),le=Object(f.a)(v.a)((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({},t.typography.subtitle2),{},{color:t.palette.text.secondary,marginBottom:t.spacing(1)})}));function de(e){var t=e.currentVariant,n=e.currentProductId,i=e.open,a=e.handleClose,c=e.handleCreateDone,r=Object(B.a)().t,o=Object(x.a)(),h=Object(b.b)(),O=h.enqueueSnackbar,f=h.closeSnackbar,y=Object(T.b)(),P=Object(p.useState)([{id:1,name:"",value:""}]),w=Object(d.a)(P,2),I=w[0],q=w[1],z=Object(p.useState)(!1),E=Object(d.a)(z,2),R=E[0],_=E[1],V=Object(p.useState)(null),D=Object(d.a)(V,2),F=D[0],H=D[1],A=Object(p.useState)(-1),U=Object(d.a)(A,2),M=U[0],K=U[1],X=Object(p.useState)(!1),G=Object(d.a)(X,2),Q=G[0],ie=G[1],de=Object(p.useState)([]),ue=Object(d.a)(de,2),je=ue[0],be=ue[1],he=Object(T.c)((function(e){return e.product})).item;Object(p.useEffect)((function(){var e,n,i=1;null===t||void 0===t||null===(e=t.addSpecifications)||void 0===e||e.map((function(e){return delete e.key,e.id=i,i+=1,e})),(null===t||void 0===t||null===(n=t.addSpecifications)||void 0===n?void 0:n.length)>0&&q(null===t||void 0===t?void 0:t.addSpecifications),H(null===t||void 0===t?void 0:t.thumbnail)}),[null===t||void 0===t?void 0:t.addSpecifications]),Object(p.useEffect)((function(){y(Object(L.h)(n))}),[n]);var Oe=function(e,t){_(!1);var n=I.map((function(n){return e===n.id&&(n[t.target.name]=t.target.value),n}));q(n)},pe=Object(p.useCallback)((function(e){var t=e[0];if(t){if(oe.a.indexOf(t.type)<0)return void O(r("common.invalid-file-type"),{variant:"error",action:function(e){return Object(N.jsx)(re.g,{size:"small",onClick:function(){return f(e)},children:Object(N.jsx)(J.Icon,{icon:ae.a})})}});t.preview=URL.createObjectURL(t),H(t)}}),[]),me=function(){if(function(){F||ie(!0);for(var e=0;e<I.length;e++){var t,n,i,a;(""!==(null===(t=I[e])||void 0===t?void 0:t.name)&&""===(null===(n=I[e])||void 0===n?void 0:n.value)||""===(null===(i=I[e])||void 0===i?void 0:i.name)&&""!==(null===(a=I[e])||void 0===a?void 0:a.value))&&_(!0)}return!!F}()&&We()){if((!F||"string"===typeof F)&&"string"===typeof F){var e=xe(F);return t?(y(Object(L.m)(n,t.sku,e)),O(r("dashboard.products.save"),{variant:"success"}),c(),!0):(y(Object(L.b)(n,e)),O(r("dashboard.products.save"),{variant:"success"}),c(),!0)}Object(se.b)(F,"products",K,(function(e){O(e,{variant:"error",action:function(e){return Object(N.jsx)(re.g,{size:"small",onClick:function(){return f(e)},children:Object(N.jsx)(J.Icon,{icon:ae.a})})}})}),(function(e){var i=xe(e);return t?(y(Object(L.m)(n,t.sku,i)),O(r("dashboard.products.save"),{variant:"success"}),c(),!0):(y(Object(L.b)(n,i)),O(r("dashboard.products.save"),{variant:"success"}),c(),!0)}))}},fe=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],ke.pictures&&(Object(se.a)(ke.pictures,"products",K,(function(e){O(e,{variant:"error",action:function(e){return Object(N.jsx)(re.g,{size:"small",onClick:function(){return f(e)},children:Object(N.jsx)(J.Icon,{icon:ae.a})})}})}),(function(e){t.push(e)})),be(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(e){var t={variantName:ke.variantName,sku:ke.sku,quantity:ke.quantity,price:ke.price,marketPrice:ke.marketPrice,thumbnail:e,pictures:je[0]};return I.map((function(e){return delete e.id,e})),I.length>=0&&""!==I[0].name&&(t.addSpecifications=I),t},ve=j.f().shape({variantName:j.h().required("Variant Name is required"),sku:j.h().required("Sku is required"),price:j.e().required("Price is required"),marketPrice:j.e().required("Market Price is required")}),ge=Object(m.d)({enableReinitialize:!0,initialValues:{variantName:(null===t||void 0===t?void 0:t.variantName)||"",sku:(null===t||void 0===t?void 0:t.sku)||"",quantity:(null===t||void 0===t?void 0:t.quantity)||1,price:(null===t||void 0===t?void 0:t.price)||"",marketPrice:(null===t||void 0===t?void 0:t.marketPrice)||"",thumbnail:(null===t||void 0===t?void 0:t.thumbnail)||"",pictures:(null===t||void 0===t?void 0:t.pictures)||[]},validationSchema:ve,onSubmit:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{me()}catch(t){}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),ye=ge.errors,ke=ge.values,Se=ge.touched,Ce=ge.handleSubmit,Pe=ge.setFieldValue,we=ge.getFieldProps,Ie=Object(p.useCallback)((function(e){Pe("pictures",e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[Pe]),We=function(){for(var e=0;e<(null===he||void 0===he?void 0:he.variants.length);e++)if((null===he||void 0===he?void 0:he.variants[e].sku)===ke.sku&&!t)return O("Sku ph\u1ea3i l\xe0 duy nh\u1ea5t",{variant:"error"}),!1;return!0};return Object(N.jsxs)(Z.a,{open:i,maxWidth:"md",fullWidth:!0,children:[Object(N.jsx)($.a,{children:Object(N.jsx)(v.a,{variant:"h4",marginBottom:2,sx:{textTransform:"uppercase"},children:"Th\xeam lo\u1ea1i s\u1ea3n ph\u1ea9m"})}),Object(N.jsx)(ee.a,{children:Object(N.jsx)(m.b,{value:ge,children:Object(N.jsx)(m.a,{children:Object(N.jsxs)(g.a,{spacing:3,children:[Object(N.jsx)(S.a,Object(u.a)(Object(u.a)({fullWidth:!0,label:"Lo\u1ea1i"},we("variantName")),{},{error:Boolean(Se.variantName&&ye.variantName),helperText:Se.variantName&&ye.variantName})),Object(N.jsxs)(g.a,{direction:"row",spacing:3,sx:{marginBottom:o.spacing(2)},children:[Object(N.jsx)(S.a,Object(u.a)(Object(u.a)({fullWidth:!0,disabled:t,label:r("products.sku")},we("sku")),{},{error:Boolean(Se.sku&&ye.sku),helperText:Se.sku&&ye.sku})),Object(N.jsx)(S.a,Object(u.a)(Object(u.a)({type:"number",fullWidth:!0,label:r("products.quantity")},we("quantity")),{},{defaultValue:1,error:Boolean(Se.quantity&&ye.quantity),helperText:Se.quantity&&ye.quantity}))]}),Object(N.jsxs)(g.a,{direction:"row",spacing:3,sx:{marginBottom:o.spacing(2)},children:[Object(N.jsx)(S.a,Object(u.a)(Object(u.a)({fullWidth:!0,placeholder:"0.00",label:r("products.price")},we("price")),{},{InputProps:{startAdornment:Object(N.jsx)(te.a,{position:"start",children:"\u0111"}),type:"number"},error:Boolean(Se.price&&ye.price),helperText:Se.price&&ye.price})),Object(N.jsx)(S.a,Object(u.a)(Object(u.a)({fullWidth:!0,placeholder:"0.00",label:r("products.market-price")},we("marketPrice")),{},{InputProps:{startAdornment:Object(N.jsx)(te.a,{position:"start",children:"\u0111"}),type:"number"},error:Boolean(Se.marketPrice&&ye.marketPrice),helperText:Se.marketPrice&&ye.marketPrice}))]}),Object(N.jsxs)(k.a,{sx:{p:3},children:[Object(N.jsxs)("div",{children:[I.map((function(e){return Object(N.jsxs)(g.a,{direction:"row",spacing:3,sx:{marginBottom:o.spacing(2)},children:[Object(N.jsx)(S.a,{fullWidth:!0,name:"name",label:r("products.specifications-name"),size:"small",value:e.name,error:R&&""===e.name,onChange:function(t){return Oe(e.id,t)}}),Object(N.jsx)(S.a,{fullWidth:!0,name:"value",label:r("products.specifications-value"),size:"small",value:e.value,error:R&&""===e.value,onChange:function(t){return Oe(e.id,t)}}),Object(N.jsx)(W.a,{disabled:1===I.length,onClick:function(){return function(e){var t=Object(Y.a)(I);t.splice(t.findIndex((function(t){return t.id===e})),1),q(t)}(e.id)},children:"X\xf3a"})]},e.id)})),R&&Object(N.jsx)(v.a,{variant:"inherit",sx:{marginLeft:o.spacing(1),marginBottom:o.spacing(1),fontSize:"small",color:o.palette.error.main},children:"Specifications must be filled in completely !!!"})]}),Object(N.jsx)(W.a,{variant:"outlined",onClick:function(){var e=I.length-1;""!==I[e].name&&""!==I[e].value?q([].concat(Object(Y.a)(I),[{id:I.length+1,name:"",value:""}])):_(!0)},children:"Th\xeam"})]}),Object(N.jsx)(k.a,{sx:{p:3},children:Object(N.jsxs)(g.a,{spacing:3,children:[Object(N.jsxs)("div",{onChange:function(){return ie(!1)},children:[Object(N.jsx)(ce.c,{label:"\u1ea2nh b\xeca",file:F,setFile:H,onDrop:pe,uploadPercent:M,accepted:"image/*",maxSize:3145728,error:Boolean(Q)}),Q&&Object(N.jsx)(C.a,{error:!0,sx:{px:2},children:"Thumbnail is required"})]}),Object(N.jsxs)("div",{children:[Object(N.jsxs)(le,{children:["H\xecnh \u1ea3nh kh\xe1c",Object(N.jsx)(v.a,{component:"span",variant:"subtitle4",sx:{color:"primary.main"},children:"\xa0Note: must upload more pictures before saving."})]}),Object(N.jsx)(ce.b,{showPreview:!0,maxSize:3145728,accept:"image/*",files:ke.pictures,onDrop:Ie,onRemove:function(e){var t=ke.pictures.filter((function(t){return t!==e}));Pe("pictures",t)},onRemoveAll:function(){Pe("pictures",[])},uploadAll:fe})]})]})})]})})})}),Object(N.jsxs)(ne.a,{children:[Object(N.jsx)(W.a,{onClick:a,color:"inherit",children:r("common.cancel")}),Object(N.jsx)(W.a,{onClick:Ce,variant:"contained",children:r(t?"common.save":"common.create")})]})]})}var ue=n(124),je=n(2953),be=Object(f.a)("img")((function(e){var t=e.theme;return{width:64,height:64,objectFit:"cover",margin:t.spacing(0,2,0,0),borderRadius:t.shape.borderRadiusSm}}));function he(){var e,t=Object(B.a)().t,n=Object(x.a)(),i=Object(b.b)().enqueueSnackbar,a=Object(T.b)(),c=Object(h.i)().id,r=Object(T.c)((function(e){return e.product})).item,o=null===r||void 0===r?void 0:r.variants,s=Object(p.useState)(null),l=Object(d.a)(s,2),u=l[0],j=l[1],O=Object(p.useState)(!1),m=Object(d.a)(O,2),f=m[0],S=m[1];Object(p.useEffect)((function(){a(Object(L.h)(c)),o=null===r||void 0===r?void 0:r.variants}),[c,null===(e=o)||void 0===e?void 0:e.length]);var C=[{id:"sku",numeric:!1,disablePadding:!0,label:t("products.sku")},{id:"variantName",numeric:!1,disablePadding:!1,label:"Lo\u1ea1i s\u1ea3n ph\u1ea9m"},{id:"price",numeric:!1,disablePadding:!1,label:t("products.price")},{id:"marketPrice",numeric:!0,disablePadding:!1,label:t("products.market-price")},{id:"quantity",numeric:!0,disablePadding:!1,label:t("products.quantity")},{id:"sold",numeric:!0,disablePadding:!1,label:"\u0110\xe3 b\xe1n"},{id:"action",numeric:!1,disablePadding:!1}];return Object(N.jsx)(y.a,{container:!0,spacing:3,sx:{marginTop:n.spacing(3)},children:Object(N.jsx)(y.a,{item:!0,xs:12,md:12,children:Object(N.jsx)(g.a,{spacing:3,children:Object(N.jsx)(k.a,{sx:{p:3},children:Object(N.jsxs)(g.a,{spacing:3,children:[Object(N.jsxs)(g.a,{direction:"row",spacing:3,sx:{justifyContent:"space-between"},children:[Object(N.jsx)(v.a,{variant:"h4",gutterBottom:!0,children:"Ph\xe2n lo\u1ea1i"}),Object(N.jsx)(W.a,{variant:"contained",startIcon:Object(N.jsx)(J.Icon,{icon:X.a}),onClick:function(){j(null),S(!0)},children:"Th\xeam lo\u1ea1i m\u1edbi"})]}),Object(N.jsx)(Q.a,{children:Object(N.jsx)(D.a,{sx:{minWidth:800},children:Object(N.jsxs)(F.a,{size:"medium",children:[Object(N.jsx)(je.c,{headLabel:C}),o&&Object(N.jsx)(H.a,{children:G.b(o,G.a()).map((function(e,t){var n=e._id,r=e.sku,s=e.variantName,l=e.price,d=e.marketPrice,u=e.quantity,b=e.sold,h=e.thumbnail,O="enhanced-table-checkbox-".concat(t);return Object(N.jsxs)(A.a,{hover:!0,tabIndex:-1,children:[Object(N.jsx)(U.a,{component:"th",id:O,scope:"row",padding:"none",style:{minWidth:220},children:Object(N.jsxs)(M.a,{sx:{py:2,display:"flex",alignItems:"center"},children:[h?Object(N.jsx)(be,{alt:h,src:h}):Object(N.jsx)(ue.e,{width:64,height:64,marginRight:2}),Object(N.jsx)(v.a,{variant:"subtitle2",noWrap:!0,children:r})]})}),Object(N.jsx)(U.a,{align:"left",children:Object(N.jsx)(v.a,{variant:"subtitle2",noWrap:!0,style:{minWidth:160},children:s})}),Object(N.jsx)(U.a,{align:"left",style:{minWidth:80},children:Object(N.jsx)(v.a,{variant:"subtitle4",noWrap:!0,align:"right",children:l})}),Object(N.jsx)(U.a,{align:"right",style:{minWidth:100},children:Object(N.jsx)(v.a,{variant:"subtitle4",noWrap:!0,children:d})}),Object(N.jsx)(U.a,{align:"right",style:{minWidth:100},children:Object(N.jsx)(v.a,{variant:"subtitle4",noWrap:!0,children:u})}),Object(N.jsx)(U.a,{align:"right",style:{minWidth:100},children:Object(N.jsx)(v.a,{variant:"subtitle4",noWrap:!0,children:b})}),Object(N.jsx)(U.a,{align:"right",onClick:function(e){return e.stopPropagation()},children:Object(N.jsx)(je.d,{onEdit:function(){return function(e){for(var t,n=0;n<o.length;n++)if(o[n].sku===e){t=n;break}var i=o[t];j(i),S(!0)}(r)},onDelete:function(){return function(e){1===o.length?i("A product must have at least 1 item",{variant:"error"}):(a(Object(L.e)(c,e)),o.length-=1,i("Delete successfully",{variant:"success"}))}(r)}})})]},n)}))})]})})}),f&&Object(N.jsx)(de,{open:f,currentVariant:u,currentProductId:c,handleClose:function(){S(!1)},handleCreateDone:function(){S(!1),o.length+=1}})]})})})})})}function Oe(){var e=Object(B.a)().t;return Object(N.jsx)(c.a,{title:e("products.edit-title"),children:Object(N.jsxs)(i.a,{maxWidth:!1,children:[Object(N.jsx)(r.a,{heading:e("products.edit"),links:[{name:"Dashboard",href:a.b.root},{name:e("products.heading"),href:a.b.app.products.list},{name:e("products.edit")}]}),Object(N.jsx)(V,{}),Object(N.jsx)(he,{})]})})}}}]);
//# sourceMappingURL=31.cd54ebcc.chunk.js.map